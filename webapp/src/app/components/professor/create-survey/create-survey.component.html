<mat-drawer-container class="example-container" [hasBackdrop]="false">
    <mat-drawer class="w-75" #drawer position="end" mode="push" [disableClose]="false">
        <h2 class="ps-3 pt-3 pe-3">Preguntas</h2>
        <div class="d-flex flex-row m-3">
            <app-question-list [isCreatingSurvey]="true" (questionToAdd)="addQuestion($event)"></app-question-list>
        </div>
    </mat-drawer>
    <mat-drawer-content>
        <div class="d-flex flex-row  bd-highlight flex-wrap h-100">
            <div class="card">
                <div class="card-body">
                    <div class="image-box">
                        <div class="imageContainer">
                            <img [src]="resourceFile" *ngIf="resourceFile != ''" alt="Question image source" />
                        </div>
                        <p *ngIf="resourceFile == ''">Incorpora un recurso</p>
                        <input type="file" class="file-input" (change)="onFileSelected($event)" #fileUpload>

                        <div class="d-flex gap-2">
                            <div class="file-upload">
                                <button mat-mini-fab color="primary" class="upload-btn" (click)="fileUpload.click()">
                                    <mat-icon>attach_file</mat-icon>
                                </button>
                            </div>
                            <button mat-mini-fab color="primary" (click)="removeFile()" *ngIf="resourceFile != ''">
                                <mat-icon>delete_forever</mat-icon>
                            </button>
                        </div>
                    </div>
                    <div class="d-flex flex-column">
                        <mat-form-field class="p-3">
                            <mat-label>TÃ­tulo</mat-label>
                            <input id="title" matInput [formControl]="title">
                        </mat-form-field>
                        <button class="m-3" mat-raised-button (click)="onSurveySubmit()">Guardar</button>
                    </div>
                </div>
            </div>
            <div class="flex-fill bd-highlight w-75">
                <button class="answers-button" mat-button (click)="drawer.toggle()">
                    <mat-icon *ngIf="!drawer.opened">keyboard_arrow_left</mat-icon>
                    <mat-icon *ngIf="drawer.opened">keyboard_arrow_right</mat-icon>
                </button>
                <h1 class="m-2">Preguntas ({{ questionsAdded.length }})</h1>
                <mat-accordion class="example-headers-align" multi>
                    <div cdkDropList class="list m-3" (cdkDropListDropped)="drop($event)">
                        <mat-expansion-panel class="p-2" hideToggle *ngFor="let question of questionsAdded; let indexOfElement=index" cdkDrag>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    <mat-icon>menu</mat-icon>

                                </mat-panel-title>
                                <mat-panel-description class="msg-header-description">
                                    <h1 class="text-nowrap">{{ question.description }}</h1>
                                </mat-panel-description>
                            </mat-expansion-panel-header>

                            <div *ngFor="let answer of question.answers">
                                <div class="d-flex flex-rowalign-items-center">
                                    <p class="align-self-center pe-5 text-break w-75">{{ answer.description }}</p>
                                    <mat-icon [ngStyle]="{'color':'green'}" *ngIf="answer.is_correct">check</mat-icon>
                                    <mat-icon [ngStyle]="{'color':'red'}" *ngIf="!answer.is_correct">clear</mat-icon>
                                </div>
                            </div>
                            <button type="button" class="btn btn-danger"
                                        (click)="removeQuestion(indexOfElement)">Eliminar</button>
                        </mat-expansion-panel>
                    </div>
                </mat-accordion>
            </div>
        </div>
    </mat-drawer-content>
</mat-drawer-container>